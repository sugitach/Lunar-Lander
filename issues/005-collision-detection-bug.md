# Issue #005: 高速移動時の衝突判定擦り抜けバグ

## 優先度
🔴 高優先度

## 概要
機体が高速で移動する際、地面との境界を擦り抜けてしまうバグが発生しています。現在の衝突判定は各フレームの機体位置のみをチェックしているため、フレーム間で境界を通過した場合に検出できません。

## 問題の詳細

### 現在の実装
`GameLoop.checkCollisions()`では、以下のように衝突判定を行っています：
- 前フレームの位置を`prevPos = position - velocity`で推定
- 前フレームと現フレームの足の位置を計算
- `Physics.checkLineIntersection()`で線分交差判定

### 問題点
1. 前フレームの位置推定が`velocity`のみに基づいており、実際の移動軌跡と異なる可能性がある
2. 高速移動時にフレーム間で大きく移動すると、境界を擦り抜ける
3. 機体の中心（ボディ）についても同様の問題が発生

## 提案される修正

### 解決策
フレーム間の移動軌跡（線分）と地形境界との交差判定を正確に行う：

1. **前フレーム位置の保存**
   - `Lander`クラスに`previousPosition`プロパティを追加
   - 毎フレーム更新時に現在位置を保存

2. **正確な軌跡計算**
   - 推定ではなく、実際の前フレーム位置を使用
   - 足の位置も前フレームの回転角度を考慮して計算

3. **交差判定の改善**
   - 既存の`Physics.checkLineIntersection()`を活用
   - すべての衝突ポイント（左足、右足、ボディ中心）で正確な軌跡を計算

## 影響範囲
- `src/entities/Lander.ts` - `previousPosition`と`previousRotation`の追加
- `src/core/GameLoop.ts` - `checkCollisions()`メソッドの修正

## 検証方法
1. 高速で落下させて地面との衝突が正しく検出されること
2. 斜めに高速移動しても地形を擦り抜けないこと
3. 通常速度での動作に影響がないこと
4. パフォーマンスに大きな影響がないこと
